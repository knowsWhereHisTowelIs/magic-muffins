$(function(){$("#details").submit(function(){$("#errorBox").slideUp(function(){$("#detail-submit").attr("disabled","disabled");$("#details").animate({opacity:"0.1"},function(){$("#ajax").show();$.ajax({type:"POST",url:"index.php",data:$("#details").serialize(),dataType:"json",success:function(a){a.success?$("#mainArea").html(a.success):($("#ajax").hide(),$("#errorBox").addClass("iblock"),$("#errorBox").html(a.error),$("#errorBox").slideDown(),a.ids&&$.each(a.ids,function(){$("#"+this).addClass("error")}),
$("#detail-submit").removeAttr("disabled"),$("#details").animate({opacity:"1"}))},error:function(){$("#ajax").hide();$("#errorBox").addClass("iblock");$("#errorBox p").text("Error connecting to gateway, it may be down. Please try again latter ");$("#errorBox").slideDown();$("#detail-submit").removeAttr("disabled");$("#details").animate({opacity:"1"})}})})});return!1});$("#details").validate({rules:{other:{required:{depends:function(){return"Other"==$("#for").val()}}}},invalidHandler:function(a,c){var b=
c.numberOfInvalids();b?($("#errorBox").text(1==b?"You missed 1 field. It has been highlighted":"You missed "+b+" fields. They have been highlighted"),$("#errorBox").removeClass("noshow").addClass("iblock")):$("#errorBox").removeClass("iblock").addClass("noshow")}});$("#for").change(function(){this.value&&this.value!=this.cache&&(this.cache=this.value,"Other"==this.value?$("#otherfield").slideDown():$("#otherfield").slideUp())})});
